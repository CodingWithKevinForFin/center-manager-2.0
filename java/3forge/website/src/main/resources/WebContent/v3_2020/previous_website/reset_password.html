<!DOCTYPE html>
<html lang="en" class="loader">
<f1:secure/>
<head>
   		<!-- Google Tag Manager -->
		<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
		new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
		j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
		'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
		})(window,document,'script','dataLayer','GTM-KP5MMRBN');</script>
		<!-- End Google Tag Manager -->
		<script src="cookiehub.js"></script>
	<title>Login</title>
	<f1:include page="'_/head.htm'"/>
</head>
<body>
	<!-- Google Tag Manager (noscript) -->
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KP5MMRBN"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<!-- End Google Tag Manager (noscript) -->
	<!--  test -->
	<div id="wrapper">
		<f1:include page="'_/header.html'"/>
		<main id="main">
			<section class="visual-section">
				<div class="container">
					<div class="decor decor-outline light-yellow"></div>
					<div class="decor decor-filled"></div>
					<div class="visual">
					</div>
				</div>
			</section>
			<section class="quote-section viewport-section">
				<div class="container">
					<h2 class="h2">Create a new password</h2>
				</div>
			</section>
			<section class="img-text-section">
				<div class="container">
					<div class="form-container login-container">
						<form action="" method="post" accept-charset="UTF-8" role="form" id="form">
							<center>
								<div>
								    <label id="error" style="color:red;"></label>
								    <input id="guid" class="inputbox" type="hidden" name="" placeholder="Email Address" value="<f1:out value="${forgot_guid}" />">	
								    <input id="email" type="text" name="" class="inputbox" placeholder="Email Address" value="">
								    <input id="pass1" type="password" autocomplete="new-password" name="" class="inputbox" placeholder="New password" value="">
								    <label id="passrules" class="smalltext">Password must be 7 to 32 characters and contain an uppercase, lowercase, numeric and special character.</label>
								    <input id="pass2" type="password" autocomplete="new-password" name="" class="inputbox" placeholder="Retype new password" value="">
								</div>
								<div class="mt-20 dblock clearboth">
									  <button id="setNewPassBtn" type="submit" class="btn" onclick='disableBtn();ajaxNow("resetPassword", getFields("form"));return false;'>Update my password</button><br><br>
								</div>
							  </center>
						</form>
					</div>	
				</div>
			</section>
		</main>
		<f1:include page="'_/footer.html'"/>
	</div>
	<script type="text/javascript" src="v2_resources/javascripts/script.js"></script>
	<script type="text/javascript">
		passRules();	
	
		// highlight current page in navigation
		$("#nav-item-login").toggleClass("active");
   		var setNewPassBtn = document.getElementById('setNewPassBtn');

		function disableBtn() {
			setNewPassBtn.disabled = true;
			setNewPassBtn.textContent = "Updating..."
		}

		function showError(text){
			document.getElementById('error').innerHTML = text;
			setNewPassBtn.disabled = false;
			setNewPassBtn.textContent = "Update my password";
		};
	</script>
	<script src="cookiebutton.js"></script>
	<script>
			// Function to set a custom cookie indicating the user's choice regarding cookies
			function setCookieHubCookie(value) {
			    // Set a cookie named 'cookiehub' with the provided value
			    document.cookie = 'cookiehub=' + value + '; expires=' + calculateExpirationDate() + '; path=/';
			}
			
			// Function to calculate the expiration date for the cookie (30 days from the current day)
			function calculateExpirationDate() {
			    var currentDate = new Date();
			    var expirationDate = new Date(currentDate.getTime() + (30 * 24 * 60 * 60 * 1000)); // 30 days in milliseconds
			    return expirationDate.toUTCString();
			}
			
			// Check if the custom cookie indicating the user's choice regarding cookies is set
			window.addEventListener('load', function() {
			    var cookieValue = getCookie('cookiehub');
			    if (!cookieValue) {
			        // If the custom cookie is not set, display the CookieHub banner
			        var cpm = {};
			        window.cookiehub.load(cpm);
			    }
			});
			
			// Set the custom cookie when the "Accept All Cookies" or "Deny All Cookies" button is clicked
			document.addEventListener('click', function(event) {
			    var target = event.target;
			    if (target.classList.contains('ch2-allow-all-btn')) {
			        // Set the custom cookie to indicate acceptance of cookies
			        setCookieHubCookie('allow');
			    } else if (target.classList.contains('ch2-deny-all-btn')) {
			        // Set the custom cookie to indicate denial of all cookies
			        setCookieHubCookie('deny');
			    }
			});
	</script>
</body>
</html>
