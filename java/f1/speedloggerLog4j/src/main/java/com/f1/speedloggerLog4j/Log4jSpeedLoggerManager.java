package com.f1.speedloggerLog4j;import java.lang.reflect.Field;import java.net.URL;import org.apache.logging.log4j.spi.LoggerContext;import com.f1.speedlogger.SpeedLoggerManager;import com.f1.speedlogger.impl.SpeedLoggerInstance;/** *  * Add the following to your runtime arguments to adapt log4j into SpeedLogger: *  *  *  * <PRE> * -Dlog4j.configuratorClass=com.f1.speedloggerLog4j.Log4jSpeedLoggerManager * -Dlog4j.configuration=com/f1/speedloggerLog4j/Log4jSpeedLoggerManager.class *  * </PRE> *  */public class Log4jSpeedLoggerManager {	private SpeedLoggerManager inner;	public Log4jSpeedLoggerManager(SpeedLoggerManager inner) {		this.inner = inner;	}	public Log4jSpeedLoggerManager() {		this(SpeedLoggerInstance.getInstance());	}	public void doConfigure(URL arg0, LoggerContext arg1) {		try {			Field f = arg1.getClass().getDeclaredField("defaultFactory");			f.setAccessible(true);			f.set(arg1, this);		} catch (Exception e) {			System.err.println("Could not trick log4j into using F1 Speed Logger");			e.printStackTrace();		}	}	public Log4jSpeedLogger makeNewLoggerInstance(String name) {		return new Log4jSpeedLogger(name, inner.getLogger(name));	}}